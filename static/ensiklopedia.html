<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Ensiklopedia - KangkungKu</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2bee4b",
                        "secondary": "#111812",
                        "background-light": "#f6f8f6",
                        "surface-light": "#ffffff",
                        "border-light": "#dbe6dd",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"],
                        "body": ["Space Grotesk", "sans-serif"],
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-background-light text-secondary">
    <div class="max-w-[1280px] mx-auto px-4 md:px-8 py-8 flex flex-col gap-8">
        <div class="text-center max-w-2xl mx-auto mb-8">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-emerald-700 text-xs font-bold uppercase tracking-wider mb-4">
                <span class="material-symbols-outlined text-sm">local_florist</span>
                Basis Pengetahuan
            </div>
            <h1 class="text-4xl md:text-5xl font-black tracking-tight text-text-main leading-[1.1]">Ensiklopedia Penyakit</h1>
            <a href="/" class="mt-4 inline-block text-primary font-bold">Kembali ke Beranda</a>
        </div>

        <div id="loading" class="flex justify-center p-10">
            <span class="material-symbols-outlined animate-spin text-4xl text-primary">autorenew</span>
        </div>

        <div id="daftar-penyakit" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
            <!-- Penyakit akan dimuat di sini -->
        </div>
    </div>

    <script src="/static/js/skrip.js"></script>
    <script>
        async function muatPenyakit() {
            const data = await ambilData('/penyakit');
            const wadah = document.getElementById('daftar-penyakit');
            const pemuat = document.getElementById('loading');

            if (data) {
                pemuat.classList.add('hidden');
                wadah.classList.remove('hidden');

                wadah.innerHTML = data.map(p => `
                    <article class="group bg-white rounded-xl overflow-hidden border border-slate-100 shadow-sm hover:shadow-xl hover:border-primary/50 transition-all duration-300 flex flex-col h-full">
                        <div class="relative h-48 overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent z-10 opacity-60"></div>
                            <img alt="${p.nama}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" src="${p.url_gambar || 'https://via.placeholder.com/400'}" />
                            <div class="absolute top-3 right-3 z-20">
                                <span class="inline-flex items-center px-2.5 py-1 rounded-md text-xs font-bold bg-amber-100 text-amber-800">
                                    Penyakit
                                </span>
                            </div>
                        </div>
                        <div class="p-5 flex flex-col flex-grow">
                            <div class="mb-3">
                                <h3 class="text-xl font-bold text-text-main group-hover:text-primary transition-colors">${p.nama}</h3>
                                <p class="text-sm text-text-muted italic font-medium">${p.nama_ilmiah || ''}</p>
                            </div>
                            <div class="mt-auto pt-4 border-t border-slate-100 flex items-center justify-between">
                                <span class="inline-flex items-center gap-1 text-xs font-semibold text-text-muted uppercase tracking-wider">
                                    Info
                                </span>
                                <button onclick="alert('Detail belum tersedia di demo ini')" class="inline-flex items-center text-sm font-bold text-primary hover:text-primary-dark transition-colors gap-1">
                                    Selengkapnya <span class="material-symbols-outlined text-[16px]">arrow_forward</span>
                                </button>
                            </div>
                        </div>
                    </article>
                `).join('');
            }
        }
        document.addEventListener('DOMContentLoaded', muatPenyakit);
    </script>
</body>
</html>
